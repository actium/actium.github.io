(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2062],{82616:(e,t,i)=>{"use strict";i.d(t,{JX:()=>u,uE:()=>c,vZ:()=>d});var o=i(77528),r=i(55456),n=i(13814),a=i(98031);let s=(e,t)=>{var i,n,a,s;if(!t&&!e)return;if(!e)return t;let l=null!=t?t:{},c=null!==(n=l.headers)&&void 0!==n?n:{};return(0,r._)((0,o._)({},l),{headers:(0,r._)((0,o._)({},c),{cookie:null!==(a=e.headers.cookie)&&void 0!==a?a:"","X-CSRFToken":null!==(s=null===(i=e.cookies)||void 0===i?void 0:i.csrftoken)&&void 0!==s?s:""})})};class l{request(e,t,i){return this.rawRequest(e,t,i).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()})}rawRequest(e,t,i){let a=s(i,t);return fetch("".concat(this.baseUrl).concat(e),(0,o._)({headers:new Headers((0,r._)((0,o._)({},this.headers),{"X-CSRFToken":(0,n.Qm)()})),credentials:"same-origin"},a))}requestHeaders(e,t){return this.headers=(0,o._)({},this.headers,null==t?void 0:t.headers),this.request(e,null==t?void 0:t.settings)}constructor(e){this.headers={"content-type":"application/json"},this.baseUrl="",this.baseUrl=e}}let c=new l(""),u=new l(a.uJ);new l(a.uJ);let d={favoriteLists:e=>"/api/problems/favorite_lists/".concat(e,"/"),problems:e=>"/api/problems/".concat(e,"/"),problemsFilter:e=>"/problems/api/filter-questions/".concat(encodeURIComponent(e)),problemsList:"/problems/api/favorites/",problemsTags:"/problems/api/tags/",problemsCategories:"/problems/api/card-info/",banner:e=>"/api/banner/".concat(e,"/"),session:"/session/",virtualContestStart:e=>"/contest/api/".concat(e,"/virtual_participate"),runcodeTaskEnqueue:e=>"/problems/".concat(e,"/interpret_solution/"),runcodeResult:e=>"/submissions/detail/".concat(e,"/check/"),submitTaskEnqueue:e=>"/problems/".concat(e,"/submit/"),submitResult:e=>"/submissions/detail/".concat(e,"/check/"),memoryDistribution:e=>"/submissions/api/memory_distribution/".concat(e,"/"),runtimeDistribution:e=>"/submissions/api/runtime_distribution/".concat(e,"/"),lastSubmittedCode:(e,t)=>"/submissions/latest/?qid=".concat(e,"&lang=").concat(t),contestRuncodeTaskEnqueue:(e,t)=>"/contest/api/".concat(e,"/problems/").concat(t,"/interpret_solution/"),contestSubmitTaskEnqueue:(e,t)=>"/contest/api/".concat(e,"/problems/").concat(t,"/submit/"),contestInfo:e=>"/contest/api/info/".concat(e,"/"),contestRankingTop:e=>{let{contestTitleSlug:t,region:i}=e;return"/contest/api/ranking/".concat(t,"/?region=").concat(i,"&top=true")},contestRankingPage:e=>{let{contestTitleSlug:t,pagination:i=1,region:o}=e;return"/contest/api/ranking/".concat(t,"/?pagination=").concat(i,"&region=").concat(o)},contestMyRanking:(e,t)=>"/contest/api/myranking/".concat(e,"/?region=").concat(t),contestSubmission:e=>"/api/submissions/".concat(e,"/"),contestSubmissionReportStatus:e=>"/contest/api/reports/submissions/".concat(e,"/"),contestSubmissionReport:"/contest/api/reports/",student:"/student/api/",studentDiscount:"/student/api/24discount/",subscribeCheckout:"/subscription/add_card_and_checkout/",isChinaIp:"/api/is_china_ip/",ctdidToken:"/accounts/ctdid/o/token/",subscription:"/subscription/premium_info/",subscriptionAddCard:"/subscription/card/",subscriptionReactivate:"/subscription/reactivate/",subscriptionCancel:"/subscription/cancel/",subscriptionBillHistory:"/subscription/billing_history/",subscriptionRefund:"/subscription/check_refund/",subscriptionSubmitRefund:"/subscription/refund/",subscriptionRedeem:e=>"/store/api/redeem_premium_email/".concat(e,"/")}},60704:(e,t,i)=>{"use strict";i.d(t,{FU:()=>p,PS:()=>h,aj:()=>u});var o=i(77528),r=i(55456),n=i(9421),a=i(9640),s=i(86474),l=i(82616);let c=(e,t)=>{var i;if(!e.advertisementAdsByPage)return null;let o=null===(i=e.advertisementAdsByPage)||void 0===i?void 0:i.find(e=>e.position.nameSlug===t),r=((null==o?void 0:o.ads)||[]).map(e=>{var t,i,o,r,n,a;return{identifier:e.name,title:e.title,imageLink:e.image,targetLink:e.link,isTagShown:e.isTagShown,subtitle:null!==(t=e.subtitle)&&void 0!==t?t:"",extraInfo:null!==(i=e.extraInfo)&&void 0!==i?i:"",baiduWidth:null!==(o=e.baiduWidth)&&void 0!==o?o:void 0,baiduHeight:null!==(r=e.baiduHeight)&&void 0!==r?r:void 0,baiduAdId:null!==(n=e.baiduAdId)&&void 0!==n?n:"",baiduAdHide:null===(a=e.baiduAdHide)||void 0===a||a}});return{positionTitle:(null==o?void 0:o.position.name)||"",displayStyle:(null==o?void 0:o.position.displayStyle)||s.gOW.Tiled,ads:r}},u=(e,t,i,n,l)=>(0,s.NUb)(a.nS,{pageSlug:e,customType:n,customId:l},(0,r._)((0,o._)({},i),{select:e=>c(e,t)})),d=e=>({positionTitle:"",displayStyle:s.gOW.Tiled,ads:e.map(e=>{var t,i;return{title:null!==(t=e.displayTitle)&&void 0!==t?t:"",subtitle:null!==(i=e.subheading)&&void 0!==i?i:"",imageLink:e.imageLink,targetLink:e.targetLink,isTagShown:!1,identifier:e.name}})}),p=(e,t,i)=>(0,n.I)(["banner-ads",t],()=>l.uE.request(l.vZ.banner(t)).then(d),i),h=(e,t,i)=>(0,n.I)(["banner-ads",t],()=>l.uE.request(l.vZ.banner(t)).then(d),i)},79780:(e,t,i)=>{"use strict";i.d(t,{J:()=>h});var o=i(74848),r=i(79656),n=i(96540),a=i(60704),s=i(74805),l=i(76033),c=i(52051),u=i(82479),d=i(75984),p=i(51543);let h=e=>{let{adPageKey:t,adsPositionKey:i,className:h}=e,{isInitialLoading:_,data:m}=(0,a.FU)(t,i,{enabled:!0}),{ads:g=[],positionTitle:b}=null!=m?m:{},f=(0,n.useRef)(null),[v,y]=(0,n.useState)(0),[k,O]=(0,n.useState)(0),[S,C]=(0,n.useState)(0),w=v<=5,E=v+k+5>=S,x=(0,s.O)(e=>e.isSidebarOpen);(0,n.useEffect)(()=>{null==g||g.forEach(e=>{d.$.problemsetAdExposure({problemset_ad_position:b||i||"",problemset_ad_name:e.identifier}),p.r.advertisementAdExposure({advertisement_ad_position:b||i||"",advertisement_ad_name:e.identifier})})},[g,i,b]);let L=()=>{var e,t,i;y((null===(e=f.current)||void 0===e?void 0:e.scrollLeft)||0),O((null===(t=f.current)||void 0===t?void 0:t.clientWidth)||0),C((null===(i=f.current)||void 0===i?void 0:i.scrollWidth)||0)};(0,n.useEffect)(()=>{if(f.current)return L(),f.current.addEventListener("scroll",L),()=>{var e;null===(e=f.current)||void 0===e||e.removeEventListener("scroll",L)}},[f.current,x,_]);let I=e=>{d.$.problemsetAdClick({problemset_ad_position:b||i||"",problemset_ad_name:e.identifier}),p.r.advertisementAdClick({advertisement_ad_position:b||i||"",advertisement_ad_name:e.identifier})};return _||g.length?(0,o.jsxs)("div",{className:(0,u.xF)("group relative",h),children:[_?null:(0,o.jsx)("div",{className:(0,u.xF)("z-base-1 absolute left-4 top-0 flex h-full select-none items-center",w?"pointer-events-none":"pointer-events-auto"),children:(0,o.jsx)("div",{className:(0,u.xF)("invisible flex h-7 w-7 cursor-pointer items-center justify-center rounded-full transition-all hover:opacity-80 group-hover:visible",w?"scale-0":"scale-100"),style:{backgroundColor:"rgba(210, 210, 215, 0.64)"},onClick:e=>{var t;e.preventDefault(),e.stopPropagation(),null===(t=f.current)||void 0===t||t.scrollBy({behavior:"smooth",left:-270})},children:(0,o.jsx)(l.d,{icon:r.Wzs,color:"black"})})}),(0,o.jsx)("div",{className:"rounded-sd-md scrollbar-hide flex select-none gap-6 overflow-y-hidden overflow-x-scroll",ref:f,children:_?Array.from([,,,,]).map((e,t)=>(0,o.jsx)("div",{className:"rounded-sd-md h-[135px] w-[270px] flex-none overflow-hidden",children:(0,o.jsx)(c.R,{className:"h-full w-full"},t)},t)):g.map((e,t)=>(0,o.jsx)("a",{href:e.targetLink,target:"_blank",rel:"noreferrer",onClick:()=>I(e),children:(0,o.jsx)("div",{className:"rounded-sd-md h-[135px] w-[270px] overflow-hidden",children:(0,o.jsx)("img",{alt:e.title,src:e.imageLink,className:"h-full w-full"})})},t))}),_?null:(0,o.jsx)("div",{className:(0,u.xF)("z-base-2 absolute right-4 top-0 flex h-full select-none items-center",E?"pointer-events-none":"pointer-events-auto"),children:(0,o.jsx)("div",{className:(0,u.xF)("invisible flex h-7 w-7 cursor-pointer items-center justify-center rounded-full transition-all hover:opacity-80 group-hover:visible",E?"scale-0":"scale-100"),style:{backgroundColor:"rgba(210, 210, 215, 0.64)"},onClick:e=>{var t;e.preventDefault(),e.stopPropagation(),null===(t=f.current)||void 0===t||t.scrollBy({behavior:"smooth",left:270})},children:(0,o.jsx)(l.d,{icon:r.XkK,color:"black"})})})]}):null}},16086:(e,t,i)=>{"use strict";i.d(t,{C:()=>c});var o=i(74848),r=i(96540),n=i(77528);let a=e=>(0,o.jsx)("a",(0,n._)({className:"hover:text-sd-blue-500 hover:underline",target:"_blank",rel:"noreferrer"},e)),s=e=>(0,o.jsx)("div",(0,n._)({className:"bg-sd-border h-[12.5px] w-[2px]"},e));var l=i(79903);let c=()=>{let e=new Date().getFullYear(),[t,i]=(0,r.useState)(!1);return(0,o.jsxs)("div",{className:"text-sd-muted-foreground flex w-full flex-col gap-2 text-xs font-normal",children:[(0,o.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,o.jsx)(a,{href:"/support",children:"Support"}),(0,o.jsx)(s,{}),(0,o.jsx)(a,{href:"/terms",children:"Terms"}),(0,o.jsx)(s,{}),(0,o.jsx)(a,{href:"/privacy",children:"Privacy Policy"}),(0,o.jsx)(s,{}),(0,o.jsxs)(l.rI,{open:t,onOpenChange:i,modal:!1,children:[(0,o.jsx)(l.ty,{asChild:!0,children:(0,o.jsx)("div",{className:"cursor-pointer",children:(0,o.jsx)(a,{children:"More"})})}),(0,o.jsxs)(l.SQ,{align:"start",className:"z-base-2 w-[110px]",children:[(0,o.jsx)(l._2,{className:"select-none",onClick:()=>{i(!1),window.open("/student")},children:"Student"}),(0,o.jsx)(l._2,{className:"select-none",onClick:()=>{i(!1),window.open("/jobs")},children:"Job"}),(0,o.jsx)(l._2,{className:"select-none",onClick:()=>{i(!1),window.open("/bugbounty")},children:"Bug Bounty"})]})]})]}),(0,o.jsxs)(a,{href:"/",children:["Copyright \xa9\xa0",e,"\xa0LeetCode"]}),(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)("img",{className:"h-[14px] w-[14px]",alt:"",src:"/_next/static/images/us-155ec17c384e18aeab7fd22e2f206768.svg"}),(0,o.jsx)(a,{href:"/region",children:"United States"})]})]})}},51543:(e,t,i)=>{"use strict";i.d(t,{r:()=>n});var o=i(92110),r=i(73105);let n={advertisementAdExposure:e=>{let t={key:"advertisement_ad_exposure",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},advertisementAdClick:e=>{let t={key:"advertisement_ad_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},advertisementAdFrequencyLimitExposure:e=>{let t={key:"advertisement_ad_frequency_limit_exposure",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},advertisementAdFrequencyLimitClick:e=>{let t={key:"advertisement_ad_frequency_limit_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},advertisementAcAfterAdClick:e=>{let t={key:"advertisement_ac_after_ad_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},advertisementAcAfterAdExposure:e=>{let t={key:"advertisement_ac_after_ad_exposure",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},advertisementAdsenseCloseBtnClick:()=>{let e={key:"advertisement_adsense_close_btn_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},advertisementAdsensePopupExposure:()=>{let e={key:"advertisement_adsense_popup_exposure",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},advertisementAdsensePopupCloseClick:()=>{let e={key:"advertisement_adsense_popup_close_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},advertisementAdsensePopupSubscribeClick:()=>{let e={key:"advertisement_adsense_popup_subscribe_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)}}},75984:(e,t,i)=>{"use strict";i.d(t,{$:()=>n});var o=i(92110),r=i(73105);let n={problemsetPageExposure:e=>{let t={key:"problemset_page_exposure",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetTopicTagsClick:e=>{let t={key:"problemset_topic_tags_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetTopicTagsExpandClick:()=>{let e={key:"problemset_topic_tags_expand_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetSwitchCategoryClick:e=>{let t={key:"problemset_switch_category_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetFilterStatusClick:e=>{let t={key:"problemset_filter_status_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetFilterListClick:e=>{let t={key:"problemset_filter_list_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetFilterDifficultyClick:e=>{let t={key:"problemset_filter_difficulty_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetFilterTagClick:e=>{let t={key:"problemset_filter_tag_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetSearchClick:()=>{let e={key:"problemset_search_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetShowTopicTagsClick:e=>{let t={key:"problemset_show_topic_tags_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetShowCompanyTagsClick:e=>{let t={key:"problemset_show_company_tags_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetShowPremiumOnlyClick:e=>{let t={key:"problemset_show_premium_only_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetRandomQuestionClick:()=>{let e={key:"problemset_random_question_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetSelectQuestionClick:e=>{let t={key:"problemset_select_question_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetQuestionNextPageClick:()=>{let e={key:"problemset_question_next_page_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetDccMedalClick:()=>{let e={key:"problemset_dcc_medal_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetDccCalendarDateClick:e=>{let t={key:"problemset_dcc_calendar_date_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetDccCalendarWeekClick:e=>{let t={key:"problemset_dcc_calendar_week_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetDccTttRedeemClick:()=>{let e={key:"problemset_dcc_ttt_redeem_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetStudyPlanClick:()=>{let e={key:"problemset_study_plan_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetProgressSessionsClick:()=>{let e={key:"problemset_progress_sessions_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetFeaturedListClick:e=>{let t={key:"problemset_featured_list_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetPopularCompanyClick:e=>{let t={key:"problemset_popular_company_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetPopularCompanyMoreClick:()=>{let e={key:"problemset_popular_company_more_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetFeedbackIconClick:()=>{let e={key:"problemset_feedback_icon_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetBackToOldClick:()=>{let e={key:"problemset_back_to_old_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetQuestionOrderClick:()=>{let e={key:"problemset_question_order_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetDifficultyOrderClick:()=>{let e={key:"problemset_difficulty_order_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetStatusOrderClick:()=>{let e={key:"problemset_status_order_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetFrequencyOrderClick:()=>{let e={key:"problemset_frequency_order_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)},problemsetAdClick:e=>{let t={key:"problemset_ad_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetAdExposure:e=>{let t={key:"problemset_ad_exposure",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetPopularCompanySearchClick:e=>{let t={key:"problemset_popular_company_search_click",data:e};o.i[r._.GIO](t),o.i[r._.GA4](t),o.i[r._.CONSOLE](t),o.i[r._.SELF_DB](t)},problemsetProgressClick:()=>{let e={key:"problemset_progress_click",data:{}};o.i[r._.GIO](e),o.i[r._.GA4](e),o.i[r._.CONSOLE](e),o.i[r._.SELF_DB](e)}}},57888:(e,t,i)=>{"use strict";i.d(t,{k:()=>r});var o=i(96540);function r(e,t){let{isActive:i=!0,rootRef:r,rootMargin:n,threshold:a=.8}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=o.useRef(!0);o.useEffect(()=>{if(!s.current||!i)return;let o=null;if((o="string"==typeof e?document.querySelector(e):e.current)&&"IntersectionObserver"in window){let e=new IntersectionObserver(i=>{let[o]=i;o.intersectionRatio>=Number(a)&&(s.current=!1,e.disconnect(),t())},{root:null==r?void 0:r.current,rootMargin:n,threshold:a});return e.observe(o),()=>e.disconnect()}},[s,e,t,r,n,a,i])}},70977:function(e,t,i){var o;o=function(e,t){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=i(e),r=i(t);function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}).apply(this,arguments)}function l(e,t){var i,o=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,i)),o}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach(function(t){a(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],o=!0,r=!1,n=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){r=!0,n=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw n}}return i}}(e,t)||_(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=Array(t);i<t;i++)o[i]=e[i];return o}function g(e,t){return new Promise(function(i,o){var r=new Image;r.onload=function(){return i(r)},r.onerror=o,!1==(null!==e&&!!e.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i))&&t&&(r.crossOrigin=t),r.src=e})}var b,f=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||0<navigator.msMaxTouchPoints)),v="undefined"!=typeof File,y={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},k=f?y.touch:y.desktop,O="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,S={x:.5,y:.5},C=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,r.default.Component);var e,t,i,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var t,i=u(l);return t=e?Reflect.construct(i,arguments,u(this).constructor):i.apply(this,arguments),t&&("object"==typeof t||"function"==typeof t)?t:p(this)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l),a(p(t=o.call(this,e)),"state",{drag:!1,my:null,mx:null,image:S}),a(p(t),"handleImageReady",function(e){var i=t.getInitialSize(e.width,e.height);i.resource=e,i.x=.5,i.y=.5,i.backgroundColor=t.props.backgroundColor,t.setState({drag:!1,image:i},t.props.onImageReady),t.props.onLoadSuccess(i)}),a(p(t),"clearImage",function(){t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height),t.setState({image:S})}),a(p(t),"handleMouseDown",function(e){(e=e||window.event).preventDefault(),t.setState({drag:!0,mx:null,my:null})}),a(p(t),"handleMouseUp",function(){t.state.drag&&(t.setState({drag:!1}),t.props.onMouseUp())}),a(p(t),"handleMouseMove",function(e){var i,o,r,n,a,s,l,u,d,p,h,_,m,g,b,f;e=e||window.event,!1!==t.state.drag&&(e.preventDefault(),r={mx:i=e.targetTouches?e.targetTouches[0].pageX:e.clientX,my:o=e.targetTouches?e.targetTouches[0].pageY:e.clientY},f=(f=t.props.rotate%360)<0?f+360:f,t.state.mx&&t.state.my&&(n=t.state.mx-i,a=t.state.my-o,s=t.state.image.width*t.props.scale,l=t.state.image.height*t.props.scale,d=(u=t.getCroppingRect()).x,p=u.y,d*=s,p*=l,_=Math.cos((h=function(e){return Math.PI/180*e})(f)),g=p+-n*(m=Math.sin(h(f)))+a*_,b={x:(d+n*_+a*m)/s+1/t.props.scale*t.getXScale()/2,y:g/l+1/t.props.scale*t.getYScale()/2},t.props.onPositionChange(b),r.image=c(c({},t.state.image),b)),t.setState(r),t.props.onMouseMove(e))}),a(p(t),"setCanvas",function(e){t.canvas=e}),t.canvas=null,t}return t=[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(O=1);var e,t,i=this.canvas.getContext("2d");this.props.image&&this.loadImage(this.props.image),this.paint(i),document&&(e=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}()&&{passive:!1},t=k.native,document.addEventListener(t.move,this.handleMouseMove,e),document.addEventListener(t.up,this.handleMouseUp,e),f&&(document.addEventListener(t.mouseMove,this.handleMouseMove,e),document.addEventListener(t.mouseUp,this.handleMouseUp,e)))}},{key:"componentDidUpdate",value:function(e,t){this.props.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height||this.props.backgroundColor!==e.backgroundColor?this.loadImage(this.props.image):this.props.image||t.image===S||this.clearImage();var i=this.canvas.getContext("2d");i.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(i),this.paintImage(i,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y&&t.backgroundColor===this.state.backgroundColor||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){var e;document&&(e=k.native,document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),f&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1)))}},{key:"isVertical",value:function(){return!this.props.disableCanvasRotation&&this.props.rotate%180!=0}},{key:"getBorders",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.props.border;return Array.isArray(t)?t:[t,t]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,i=e.height,o=e.rotate,r=e.border,n={},a=h(this.getBorders(r),2),s=a[0],l=a[1];return this.isVertical()?(n.width=i,n.height=t):(n.width=t,n.height=i),n.width+=2*s,n.height+=2*l,{canvas:n,rotate:o,width:t,height:i,border:r}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var i=document.createElement("canvas");this.isVertical()?(i.width=e.height,i.height=e.width):(i.width=e.width,i.height=e.height);var o=i.getContext("2d");return o.translate(i.width/2,i.height/2),o.rotate(this.props.rotate*Math.PI/180),o.translate(-i.width/2,-i.height/2),this.isVertical()&&o.translate((i.width-i.height)/2,(i.height-i.width)/2),t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(-e.x,-e.y,t.resource.width,t.resource.height)),o.drawImage(t.resource,-e.x,-e.y),i}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,i=e.height,o=document.createElement("canvas");return this.isVertical()?(o.width=i,o.height=t):(o.width=t,o.height=i),this.paintImage(o.getContext("2d"),this.state.image,0,1),o}},{key:"getXScale",value:function(){return Math.min(1,this.props.width/this.props.height/(this.state.image.width/this.state.image.height))}},{key:"getYScale",value:function(){return Math.min(1,this.props.height/this.props.width/(this.state.image.height/this.state.image.width))}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),i=1/this.props.scale*this.getYScale(),o={x:e.x-t/2,y:e.y-i/2,width:t,height:i},r=0,n=1-o.width,a=0,s=1-o.height;return(this.props.disableBoundaryChecks||1<t||1<i)&&(r=-o.width,a=-o.height,s=n=1),c(c({},o),{},{x:Math.max(r,Math.min(o.x,n)),y:Math.max(a,Math.min(o.y,s))})}},{key:"loadImage",value:function(e){v&&e instanceof File?this.loadingImage=new Promise(function(t,i){var o=new FileReader;o.onload=function(e){try{var o=g(e.target.result);t(o)}catch(e){i(e)}},o.readAsDataURL(e)}).then(this.handleImageReady).catch(this.props.onLoadFailure):"string"==typeof e&&(this.loadingImage=g(e,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(e,t){var i,o,r=this.getDimensions();return t/e<r.height/r.width?o=e*((i=this.getDimensions().height)/t):i=t*((o=this.getDimensions().width)/e),{height:i,width:o}}},{key:"paintImage",value:function(e,t,i,o){var r,n=3<arguments.length&&void 0!==o?o:O;t.resource&&(r=this.calculatePosition(t,i),e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(n,n),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,r.x,r.y,r.width,r.height),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(r.x,r.y,r.width,r.height)),e.restore())}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var i=h(this.getBorders(t),2),o=i[0],r=i[1],n=this.getCroppingRect(),a=e.width*this.props.scale,s=e.height*this.props.scale,l=-n.x*a,c=-n.y*s;return this.isVertical()?(l+=r,c+=o):(l+=o,c+=r),{x:l,y:c,height:s,width:a}}},{key:"paint",value:function(e){e.save(),e.scale(O,O),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t,i,o,r,n,a=this.props.borderRadius,s=this.getDimensions(),l=h(this.getBorders(s.border),2),c=l[0],u=l[1],d=s.canvas.height,p=s.canvas.width,a=Math.max(a,0);a=Math.min(a,p/2-c,d/2-u),e.beginPath(),t=p-2*c,i=d-2*u,0===(o=a)?e.rect(c,u,t,i):(r=t-o,n=i-o,e.translate(c,u),e.arc(o,o,o,Math.PI,1.5*Math.PI),e.lineTo(r,0),e.arc(r,o,o,1.5*Math.PI,2*Math.PI),e.lineTo(t,n),e.arc(r,n,o,2*Math.PI,.5*Math.PI),e.lineTo(o,i),e.arc(o,n,o,.5*Math.PI,Math.PI),e.translate(-c,-u)),e.rect(p,0,-p,d),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.props,t=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.backgroundColor,e.style),i=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,e.disableHiDPIScaling,e.disableCanvasRotation,function(e,t){if(null==e)return{};var i,o=function(e,t){if(null==e)return{};for(var i,o={},r=Object.keys(e),n=0;n<r.length;n++)i=r[n],0<=t.indexOf(i)||(o[i]=e[i]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),n=0;n<r.length;n++)i=r[n],0<=t.indexOf(i)||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i]);return o}(e,["scale","rotate","image","border","borderRadius","width","height","position","color","backgroundColor","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling","disableCanvasRotation"])),o=this.getDimensions(),n={width:o.canvas.width,height:o.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},a={width:o.canvas.width*O,height:o.canvas.height*O,style:c(c({},n),t)};return a[k.react.down]=this.handleMouseDown,f&&(a[k.react.mouseDown]=this.handleMouseDown),r.default.createElement("canvas",s({ref:this.setCanvas},a,i))}}],n(l.prototype,t),i&&n(l,i),l}();return a(C,"propTypes",{scale:o.default.number,rotate:o.default.number,image:o.default.oneOfType([o.default.string].concat(function(e){if(Array.isArray(e))return m(e)}(b=v?[o.default.instanceOf(File)]:[])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(b)||_(b)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),border:o.default.oneOfType([o.default.number,o.default.arrayOf(o.default.number)]),borderRadius:o.default.number,width:o.default.number,height:o.default.number,position:o.default.shape({x:o.default.number,y:o.default.number}),color:o.default.arrayOf(o.default.number),backgroundColor:o.default.string,crossOrigin:o.default.oneOf(["","anonymous","use-credentials"]),onLoadFailure:o.default.func,onLoadSuccess:o.default.func,onImageReady:o.default.func,onImageChange:o.default.func,onMouseUp:o.default.func,onMouseMove:o.default.func,onPositionChange:o.default.func,disableBoundaryChecks:o.default.bool,disableHiDPIScaling:o.default.bool,disableCanvasRotation:o.default.bool}),a(C,"defaultProps",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1,disableCanvasRotation:!0}),C},e.exports=o(i(5556),i(96540))}}]);